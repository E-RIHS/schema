{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "$id": "https://e-rihs.io/schema/catalogue-v1.0.schema.json",
    "$code": "3a9d",
    "title": "Catalogue",
    "type": "object",
    "required": ["title", "summary", "services"],
    "properties": {
        "$schema": {
            "type": "string",
            "options": {
                "hidden": true
            }
        },
        "id": {
            "type": "string",
            "cordra": {
                "type": {
                    "autoGeneratedField": "handle"
                }
            }
        },
       "title": {
            "title": "Title",
            "description": "Catalogue title",
            "type": "string",
            "minLength": 3,
            "maxLength": 100,
            "cordra": {
                "preview": {
                    "showInPreview": true,
                    "isPrimary": true
                }
            }
        },
        "summary": {
            "title": "Catalogue Summary",
            "description": "A brief description of the catalogue of services",
            "type": "string",
            "format": "textarea",
            "minLength": 3,
            "cordra": {
                "preview": {
                    "showInPreview": true,
                    "excludeTitle": true
                }
            }
        },
        "offered_to": {
            "$ref": "https://e-rihs.io/schema/controlled_lists.schema.json#/definitions/offered_to"
        },
        "coordinator": {
            "title": "Coordinator",
            "description": "The person that coordinates the catalogue",
            "type": "string",
            "cordra": {
                "type": {
                    "handleReference": {
                        "types": ["Person"]
                    }
                }
            }
        },
        "services": {
            "title": "Services",
            "description": "A list of services offered by the catalogue",
            "type": "array",
            "items": {
                "title": "Service",
                "type": "object",
                "required": ["service_id", "service_active"],
                "properties": {
                    "service_id": {
                        "title": "Service ID",
                        "type": "string",
                        "cordra": {
                            "type": {
                                "handleReference": {
                                    "types": ["Service"]
                                }
                            }
                        }
                    },
                    "nominated_by": {
                        "title": "Nominated by",
                        "description": "Organisation that nominates the service in this catalogue. If a service is offered on the EU level, the nominating organisation should be a national node.",
                        "type": "string",
                        "cordra": {
                            "type": {
                                "handleReference": {
                                    "types": ["Organisation"]
                                }
                            }
                        }
                    },
                    "access_count": {
                        "title": "Service Annual Access Count",
                        "description": "For new services this would need to be based on past experience of the provider if applicable, or related to the relevant resources that can be provided. For automated digital tools this count could be based on previous use metrics or estimated in relation to the planned dissemination plan. For running services this count could represent and average of the recorded value for the previous year - a record of the count for each year should be stored.",
                        "type": "number"
                    },
                    "service_active": {
                        "title": "Active service",
                        "description": "Is the service currently open for access?",
                        "type": "boolean",
                        "default": true
                    },
                    "checked_date": {
                        "title": "Checked Date",
                        "description": "When was the description of the service last checked",
                        "type": "string",
                        "format": "date"
                    }
                }
            }
        }
    }
}