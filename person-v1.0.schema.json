{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "$id": "https://e-rihs.io/schema/person-v1.0.schema.json",
    "$code": "702e",
    "title": "Person",
    "type": "object",
    "required": [
        "first_name",
        "last_name",
        "mbox"
    ],
    "properties": {
        "$schema": {
            "type": "string",
            "options": {
                "hidden": true
            }
        },
        "id": {
            "type": "string",
            "cordra": {
                "type": {
                    "autoGeneratedField": "handle"
                }
            }
        },
        "title": {
            "title": "Title",
            "description": "Personal title",
            "$ref": "https://e-rihs.io/schema/controlled_lists.schema.json#/definitions/personal_title"
        },
        "first_name": {
            "title": "First name",
            "description": "First name",
            "type": "string",
            "minLength": 3,
            "maxLength": 128
        },
        "last_name": {
            "title": "Last name",
            "description": "Last name",
            "type": "string",
            "minLength": 3,
            "maxLength": 128
        },
        "full_name": {
            "title": "Full name",
            "description": "Full name, used internally for improved findability of the person",
            "type": "string",
            "options": {
                "hidden": true
            },
            "cordra": {
                "preview": {
                    "showInPreview": true,
                    "isPrimary": true
                }
            }
        },
        "external_pids": {
            "title": "External PIDs",
            "description": "External PIDs",
            "type": "array",
            "items": {
                "type": "object",
                "required": ["pid_type", "pid"],
                "properties": {
                    "pid_type": {
                        "$ref": "https://e-rihs.io/schema/controlled_lists.schema.json#/definitions/persistent_identifier",
                        "default": "https://hdl.handle.net/21.11158/0001-435g7fgxnl86qx92p8d3tdnhc"
                    },
                    "pid": {
                        "title": "PID",
                        "description": "PID",
                        "type": "string",
                        "format": "uri"
                    }
                }
            }
        },
        "based_in": {
            "title": "Country of Operation",
            "description": "The country in which the person is based for legal and professional reasons, the value will be used in relation to distribution of people and in relation to initial assemesnt of elegability when it is related to location.",
            "$ref": "https://e-rihs.io/schema/controlled_lists.schema.json#/definitions/country"
        },
        "research_profile": {
            "title": "Short Biography",
            "description": "A short bio or profile describing the defined person",
            "type": "string",
            "minLength": 100,
            "maxLength": 1000,
            "format": "textarea"
        },
        "part_of_organisation": {
            "title": "Affiliations",
            "description": "Affiliations",
            "type": "array",
            "items": {
                "title": "Affiliation",
                "type": "object",
                "required": ["organisation_pid"],
                "properties": {
                    "organisation_pid": {
                        "title": "Organisation",
                        "description": "Reference to the Organisation",
                        "type": "string",
                        "cordra": {
                            "type": {
                                "handleReference": {
                                    "types": ["Organisation"]
                                }
                            }
                        }
                    },
                    "start_date": {
                        "title": "Start date",
                        "description": "Start date",
                        "type": "string",
                        "format": "date"
                    },
                    "end_date": {
                        "title": "End date",
                        "description": "End date",
                        "type": "string",
                        "format": "date"
                    }
                }
            }
        },
        "mbox": {
            "title": "Email",
            "description": "Contact email address (professional)",
            "type": "string",
            "format": "email"
        },
        "phone": {
            "title": "Phone",
            "description": "Contact phone number (professional)",
            "type": "string",
            "format": "tel"
        },
        "img_url": {
            "title": "Image URL",
            "description": "URL to an image representing the person (e.g. portrait or profile photo)",
            "type": "string",
            "format": "uri"
        },
        "webpage": {
            "title": "Webpage",
            "description": "Webpage(s) related to the person (e.g. personal webpage, profile page on the institutional website, etc.)",
            "type": "array",
            "items": {
                "title": "URL",
                "description": "URL",
                "type": "string",
                "format": "uri"
            }
        },
        "research_disciplines": {
            "title": "Research Disciplines",
            "description": "Which domains or disciplines has this person worked within, has experience within. This field is connected to an extensive controlled list.",
            "type": "array",
            "minItems": 1,
            "items": {
                "$ref": "https://e-rihs.io/schema/controlled_lists.schema.json#/definitions/research_discipline"
            }
        },
        "research_disciplines_narrower": {
            "title": "Research Disciplines (narrower/other)",
            "description": "More precise description of the domains or disciplines this person has worked within or has experience within (free text).",
            "type": "array",
            "items": {
                "title": "Research Discipline",
                "type": "string"
            }
        },
        "research_reference": {
            "title": "Research Reference",
            "description": "Research Reference",
            "type": "array",
            "items": {
                "type": "object",
                "required": ["reference"],
                "properties": {
                    "reference": {
                        "title": "Citation",
                        "description": "Preferred Citation text",
                        "type": "string"
                    },
                    "url": {
                        "title": "URL",
                        "description": "URL",
                        "type": "string",
                        "format": "uri"
                    },
                    "reference_type": {
                        "title": "Reference type",
                        "description": "The purpose of the reference; what does it relate to or provide more information for.  This dropdown list gives a few examples, but if required, you can enter a different value here.",
                        "$ref": "https://e-rihs.io/schema/controlled_lists.schema.json#/definitions/reference_role"
                    }
                }
            }
        },
        "joined_the_field_date": {
            "title": "Date of joining the heritage science field",
            "description": "When did you start working in this field?",
            "type": "string",
            "format": "date"
        },
        "first_active_date": {
            "title": "First active date",
            "description": "First date this person was active in E-RIHS (administrative field which will be automatically filled in)",
            "type": "string",
            "format": "date",
            "options": {
                "hidden": true
            }
        },
        "last_active_date": {
            "title": "Last active date",
            "description": "Last date this person was active in E-RIHS (administrative field which will be automatically filled in)",
            "type": "string",
            "format": "date",
            "options": {
                "hidden": true
            }
        }
    }
}
