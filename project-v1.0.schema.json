{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "$id": "https://e-rihs.io/schema/project-v1.0.schema.json",
    "$code": "21e1",
    "title": "Access proposal or project",
    "type": "object",
    "required": [
        "title",
        "summary",
        "participants",
        "scientific_background",
        "project_description",
        "project_questions",
        "impacts",
        "research_focus"
    ],
    "properties": {
        "$schema": {
            "type": "string",
            "options": {
                "hidden": true
            }
        },
        "id": {
            "type": "string",
            "cordra": {
                "type": {
                    "autoGeneratedField": "handle"
                }
            }
        },
        "title": {
            "title": "Title",
            "description": "Project title",
            "type": "string",
            "minLength": 3,
            "maxLength": 150
        },
        "summary": {
            "title": "Project Summary",
            "description": "A brief description of the projects, including the key activities",
            "type": "string",
            "minLength": 100,
            "maxLength": 300
        },
        "project_justification": {
            "title": "Project Justification",
            "description": "Optional - For re-submissions please provide a brief description of what has been updated or changed. For continuation projects please specify the scientific motivation for continuing the work.",
            "type": "string",
            "maxLength": 1500,
            "format": "textarea"
        },
        "research_disciplines": {
            "title": "Research Disciplines",
            "description": "Which domains or disciplines has a given service worked within, has experience within. This field is connected to an extensive controlled list.",
            "type": "array",
            "minItems": 1,
            "items": {
                "$ref": "https://e-rihs.io/schema/controlled_lists.schema.json#/definitions/research_discipline"
            }
        },
        "research_disciplines_narrower": {
            "title": "Research Disciplines (narrower/other)",
            "description": "More precise description of the domains or disciplines a given service has worked within or has experience within (free text).",
            "type": "array",
            "items": {
                "title": "Research Discipline",
                "type": "string"
            }
        },
        "keywords": {
            "title": "Keywords",
            "description": "Recommended a controlled list with the option to add more.",
            "type": "array",
            "items": {
                "type": "string"
            }
        },
        "scientific_background": {
            "title": "Scientific background",
            "description": "A short description of any relevant scientific research which led to or supports this project",
            "type": "string",
            "minLength": 100,
            "maxLength": 1500,
            "format": "textarea"
        },
        "project_description": {
            "title": "Project Description",
            "description": "A longer description of the project, including the novelty and/or added value of the proposed work",
            "type": "string",
            "minLength": 100,
            "maxLength": 1500,
            "format": "textarea"
        },
        "research_focus": {
            "title": "Research Focus",
            "description": "A list of subjects (objects, sites, samples, archives, etc.) that are the focus of the project.",
            "type": "array",
            "items": {
                "type": "string"
            },



            "TODO": "Research focus is a separate model, this is just a placeholder for now"



        },
        "project_questions": {
            "title": "Research Questions",
            "description": "Brief descriptions of the research questions, focus, aims or issues that this project is intended to answer or address.",
            "type": "array",
            "items": {
                "type": "string",
                "minLength": 10,
                "maxLength": 500,
                "format": "textarea"
            },
            "minItems": 1
        },
        "previous_relevant_analysis": {
            "title": "Previous relevant analysis",
            "type": "array",
            "items": {
                "type": "string",
                "minLength": 1,
                "maxLength": 500,
                "format": "textarea"
            }
        },
        "related_projects": {
            "title": "Related Projects",
            "description": "A list of relevant related projects, particularly any previous E-RIHS projects",
            "type": "array",
            "items": {
                "type": "object",
                "required": [
                    "title"
                ],
                "properties": {
                    "title": {
                        "title": "Related Project Title",
                        "type": "string"
                    },
                    "url": {
                        "title": "URL",
                        "description": "URL ideally a PID which links to the description of the defined project.",
                        "type": "string",
                        "format": "uri"
                    }
                }
            },



            "TODO1": "This needs to be replaced into an array of (1) cordra-links to (a) previous access projects or (b) external projects (using a separate schema),",
            "TODO2": "and (2) roles/types (e.g. part of a broader project, part of a long-term project, etc.)"



        },
        "approach": {
            "title": "Project Approach",
            "description": "Procedural approach to the project, including the methodology, steps, and measurement strategy.",
            "type": "array",
            "items": {
                "type": "string",
                "minLength": 10,
                "maxLength": 500,
                "format": "textarea"
            },
            "minItems": 1
        },
        "impacts": {
            "title": "Projects Impacts",
            "type": "array",
            "items": {
                "type": "string",
                "minLength": 10,
                "maxLength": 300,
                "format": "textarea"
            },
            "minItems": 1
        },
        "bibliography": {
            "title": "Project bibliography",
            "description": "Bibliography related to the project. Only the first 5 references will always evaluated by the peer reviewers.",
            "type": "array",
            "items": {
                "title": "Reference",
                "type": "object",
                "required": ["citation"],
                "properties": {
                    "citation": {
                        "title": "Citation",
                        "description": "The formatted details for the given reference.",
                        "type": "string"
                    },
                    "url": {
                        "title": "URL",
                        "description": "URL",
                        "type": "string",
                        "format": "uri"
                    },
                    "role": {
                        "$ref": "https://e-rihs.io/schema/controlled_lists.schema.json#/definitions/reference_role"
                    }
                }
            }
        },
        "project_attachment": {
            "title": "Project Attachments",
            "description": "",
            "type": "array",
            "items": {
                "type": "object",
                "required": [
                    "attachment_file"
                ],
                "properties": {
                    "file": {
                        "title": "Attachment File",
                        "description": "Please identify any additional images, files, etcâ€¦. A direct URL to the file is preferred, if not submit the files to E-RIHS.",
                        "type": "string"
                    },
                    "description": {
                        "title": "Attachment Description",
                        "description": "A brief description of the attached file and its purpose",
                        "type": "string"
                    },
                    "licence": {
                        "title": "Attachment Licence",
                        "description": "URL ideally a PID which links to a definition of the selected licence. If this field is left blank, the identified file will be treated as private.",
                        "type": "string",
                        "format": "uri"
                    }
                }
            }
        },
        "dmp": {
            "title": "Project Data Management Plan",
            "description": "An open description of the data management procedures followed with the project, including licence issues, preferred data repositories, publication embargoes, common file formats, software and systems used, etc.",
            "anyOf": [
                {
                    "title": "Textual description",
                    "type": "string",
                    "format": "textarea"
                },
                {
                    "title": "Reference to external documents",
                    "type": "object",
                    "properties": {
                        "citation": {
                            "title": "Citation",
                            "description": "The formatted details for the given reference.",
                            "type": "string"
                        },
                        "url": {
                            "title": "URL",
                            "description": "URL",
                            "type": "string",
                            "format": "uri"
                        }
                    }
                }
            ]
        },
        "selected_services": {
            "title": "Services",
            "description": "A list of proposed or actual services requested or selected for this project.",
            "type": "array",
            "items": {
                "type": "object",
                "required": [
                    "service_id",
                    "helpdesk_assistance"
                ],
                "properties": {
                    "service_id": {
                        "title": "Service ID",
                        "description": "Please select a Service ID",
                        "type": "string",
                        "cordra": {
                            "type": {
                                "handleReference": {
                                    "types": ["Service"]
                                }
                            }
                        }
                    },
                    "discussion": {
                        "title": "Selection Discussion",
                        "description": "Has there been any direct communications with the selected facility and if so please describe the scope of the communications and who has been involved in it.",
                        "type": "string",
                        "maxLength": 1500,
                        "format": "textarea"
                    },
                    "helpdesk_assistance": {
                        "title": "Helpdesk Assistance",
                        "description": "Was the selection of this Service aided by the E-RIHS Helpdesk?",
                        "type": "boolean",
                        "default": false
                    },
                    "required_access_units": {
                        "title": "Expected Days",
                        "description": "How many days will the Service be available for?",
                        "type": "number"
                    },
                    "project_dates": {
                        "title": "Project Dates",
                        "type": "array",
                        "items": {
                            "title": "Date",
                            "type": "object",
                            "properties": {
                                "start_date": {
                                    "title": "Start date",
                                    "type": "string",
                                    "format": "date"
                                },
                                "end_date": {
                                    "title": "End date",
                                    "type": "string",
                                    "format": "date"
                                }
                            }
                        }
                    }
                }
            }
        },
        "industrial_involvement": {
            "title": "Industrial involvement or sponsorship",
            "description": "Provide any relevant details, an empty field will be treated as indicating no Industrial involvement. (This information is used only for statistical purposes. Your answer will not affect your proposal)",
            "type": "string",
            "minLength": 0,
            "maxLength": 1500,
            "format": "textarea"
        },
        "initiated_via": {
            "title": "E-RIHS Connection",
            "description": "Flag other E-RIHS connections if applicable. (Would we need a connection note, not sure how important this field is)",
            "type": "array",
            "items": {
                "type": "string",
                "enum": [
                    "personal contact",
                    "web page",
                    "conference",
                    "article",
                    "other"
                ]
            }
        },
        "related_training": {
            "title": "Related Training Programs",
            "description": "Describe any directly related initial training (PhD) or a training activities.",
            "type": "string",
            "minLength": 0,
            "maxLength": 1500,
            "format": "textarea"
        },
        "participants": {
            "title": "Participants",
            "type": "array",
            "minItems": 1,
            "items": {
                "title": "Participant",
                "type": "object",
                "properties": {
                    "participant_id": {
                        "title": "Participant ID",
                        "description": "A person as defined in the system",
                        "type": "string",
                        "cordra": {
                            "type": {
                                "handleReference": {
                                    "types": ["Person"]
                                }
                            }
                        }
                    },
                    "roles": {
                        "title": "Roles",
                        "type": "array",
                        "minItems": 1,
                        "items": {
                            "$ref": "https://e-rihs.io/schema/controlled_lists.schema.json#/definitions/person_role"
                        }
                    }
                },
                "required": [
                    "participant_id",
                    "roles"
                ]
            }
        }
    }
}