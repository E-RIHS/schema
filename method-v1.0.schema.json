{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "$id": "https://e-rihs.io/schema/method-v1.0.schema.json",
    "$code": "2615",
    "title": "Standard Method",
    "description": "The schema outlines the required metadata to define a standard method or protocol",
    "type": "object",
    "required": [
        "preferred_label",
        "method_version",
        "creation_date",
        "technique",
        "author"
    ],
    "properties": {
        "$schema": {
            "type": "string",
            "options": {
                "hidden": true
            }
        },
        "id": {
            "type": "string",
            "cordra": {
                "type": {
                    "autoGeneratedField": "handle"
                }
            }
        },
        "preferred_label": {
            "title": "Preferred label",
            "description": "Preferred label",
            "type": "string",
            "minLength": 3,
            "maxLength": 100,
            "cordra": {
                "preview": {
                    "showInPreview": true,
                    "isPrimary": true
                }
            }
        },
        "alternative_labels": {
            "title": "Alternative codes, labels or names",
            "description": "Any alternative codes, labels or names for the method (not forthe technique or tools!). This could be an acronym or a full text name if an acronym is used as the preferred label. This is useful for search and discovery purposes.",
            "type": "array",
            "items": {
                "type": "string"
            }
        },
        "method_type": {
            "title": "Method Type",
            "description": "The type of method this represents. Examples are 'Analysis Method', 'Research support'... This is a free text field but will be converted into a controlled vocabulary field.",
            "type": "string"
        },
        "technique": {
            "title": "Relevant Technique",
            "description": "The general technique that this Method is an application of.",
            "type": "string",
            "cordra": {
                "type": {
                    "handleReference": {
                        "types": ["Technique"]
                    }
                }
            }
        },
        "method_version": {
            "title": "Version",
            "description": "The version identifier for this method",
            "type": "string"
        },
        "creation_date": {
            "title": "Creation Date",
            "description": "The date this method was created",
            "type": "string",
            "format": "date"
        },
        "author": {
            "title": "Author",
            "description": "A relevant person ID, either a local database ID or an ORCID, for the creator or author of this method",
            "type": "string",
            "format": "url"
        },
        "related_tools": {
            "title": "Related Tools",
            "description": "The key related tools (equipment or software) described associated with this method. FIXLAB, MOLAB and DIGILAB methods should define at least one tool; for ARCHLAB methods this is optional.",
            "type": "array",
            "items": {
                "title": "Tool",
                "type": "object",
                "properties": {
                    "tool_pid": {
                        "title": "Tool",
                        "type": "string",
                        "cordra": {
                            "type": {
                                "handleReference": {
                                    "types": ["Equipment", "Software"]
                                }
                            }
                        }
                    },
                    "tool_role": {
                        "title": "Tool Role",
                        "type": "string",
                        "examples": [
                            "Main Equipment",
                            "Detector",
                            "Data Processor",
                            "Peak Detector"
                        ]
                    }
                }
            }
        },
        "method_documentation": {
            "title": "Method Documentation",
            "description": "The documentation for the method, this can be a reference to an external document or a textual description",
            "anyOf": [
                {
                    "title": "Reference to external documents",
                    "type": "object",
                    "properties": {
                        "citation": {
                            "title": "Citation",
                            "description": "The formatted details for the given reference.",
                            "type": "string"
                        },
                        "url": {
                            "title": "URL",
                            "description": "URL",
                            "type": "string",
                            "format": "uri"
                        }
                    }
                },
                {
                    "title": "Textual description",
                    "type": "string",
                    "format": "textarea"
                }
            ]
        },
        "method_parameter": {
            "title": "Core Method Parameters",
            "description": "A list of the core or key equipment or software parameters used within this method. This does not need to be an exhaustive list and can be limited to the parameters which are used to control the activity, might influence subsequent interpretations or will be important for data comparison and discovery.",
            "type": "array",
            "items": {
                "title": "Parameter",
                "type": "object",
                "properties": {
                    "parameter_value": {
                        "title": "Value",
                        "type": "string"
                    },
                    "parameter_unit": {
                        "title": "Unit",
                        "type": "string",
                        "examples": ["none", "cm", "nm", "count"]
                    },
                    "parameter_type": {
                        "title": "Parameter Type",
                        "type": "string",
                        "examples": [
                            "working distance",
                            "wavelength",
                            "signal count"
                        ]
                    },
                    "parameter_related_tool": {
                        "title": "Parameter Specific Related Tool",
                        "description": "When multiple Tools are used within a single Method defined parameters can be associated to the relevant tool. This can be left blank for single tool Methods and the assumption will be that the parameters are associated with single tool related to the Method in general.",
                        "type": "string"
                    }
                }
            }
        }
    }
}
