{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://e-rihs.io/schema/method-v1.0.schema.json",
    "$code": "2615",
    "title": "Standard Method",
    "description": "The schema outlines the required metadata to define a standard method or protocol",
    "type": "object",
    "required": [
        "preferred_label",
        "method_version",
        "creation_date",
        "technique",
        "authors"
    ],
    "properties": {
        "$schema": {
            "type": "string",
            "options": {
                "hidden": true
            }
        },
        "id": {
            "type": "string",
            "cordra": {
                "type": {
                    "autoGeneratedField": "handle"
                }
            }
        },
        "preferred_label": {
            "title": "Title",
            "description": "This should be a short, descriptive name that is unique to this method (not for the technique or tools!). It is good practice include the acronym of the institution, technique or equipment label and a date or version label. Example: 'NG Lux Allowance Method 2024'.",
            "type": "string",
            "minLength": 3,
            "maxLength": 100,
            "cordra": {
                "preview": {
                    "showInPreview": true,
                    "isPrimary": true
                }
            }
        },
        "alternative_labels": {
            "title": "Alternative codes, labels or names",
            "description": "Any alternative codes, labels or names for the method (not for the technique or tools!). This could be an acronym or a full text name if an acronym is used as the preferred label. This is useful for search and discovery purposes.",
            "type": "array",
            "items": {
                "type": "string"
            }
        },
        "method_type": {
            "title": "Method Type",
            "description": "The type of method this represents. Examples are 'Analysis Method', 'Research support', 'Workflow'... This is a free text field but will be converted into a controlled vocabulary field.",
            "type": "string"
        },
        "technique": {
            "title": "Relevant Technique",
            "description": "The general technique that this Method is an application of. This should be a reference to a controlled list of techniques; if none is applicable, choose 'other' and specify the technique in 'Technique (other)' field below.",
            "$ref": "https://e-rihs.io/schema/controlled_lists.schema.json#/definitions/technique"
        },
        "technique_other": {
            "title": "Technique (other)",
            "description": "If the technique is not in the controlled vocabulary, please specify it here.",
            "type": "string"
        },
        "method_version": {
            "title": "Version",
            "description": "The version for this method",
            "type": "string"
        },
        "creation_date": {
            "title": "Creation Date",
            "description": "The date this method was created",
            "type": "string",
            "format": "date"
        },
        "authors": {
            "title": "Authors",
            "description": "The creators or authors of this method. These can be persons or an organisations.",
            "type": "array",
            "minItems": 1,
            "items": {
                "title": "Author",
                "type": "string",
                "cordra": {
                    "title": "Author",
                    "type": {
                        "handleReference": {
                            "types": ["Person", "Organization"]
                        }
                    }
                }
            }
            
        },
        "related_tools": {
            "title": "Related Tools",
            "description": "The key related tools (equipment or software) described associated with this method. FIXLAB, MOLAB and DIGILAB methods should define at least one tool; for ARCHLAB methods this is optional.",
            "type": "array",
            "items": {
                "title": "Tool",
                "type": "object",
                "properties": {
                    "tool_pid": {
                        "title": "Tool",
                        "type": "string",
                        "cordra": {
                            "type": {
                                "handleReference": {
                                    "types": ["Equipment", "Software"]
                                }
                            }
                        }
                    },
                    "tool_role": {
                        "$ref": "https://e-rihs.io/schema/controlled_lists.schema.json#/definitions/tool_role"
                    },
                    "tool_role_other": {
                        "title": "Other Tool Role",
                        "description": "If the tool role is not in the controlled vocabulary, please specify it here.",
                        "type": "string"
                    }
                }
            }
        },
        "method_documentation": {
            "title": "Method Documentation",
            "description": "The documentation for the method, this can be a reference to an external document or a textual description. External documents can be described with a citation and/or a URL.",
            "anyOf": [
                {
                    "title": "Reference to external documents",
                    "type": "object",
                    "properties": {
                        "citation": {
                            "title": "Citation",
                            "description": "The formatted details for the given reference.",
                            "type": "string"
                        },
                        "url": {
                            "title": "URL",
                            "description": "URL",
                            "type": "string",
                            "format": "uri"
                        }
                    }
                },
                {
                    "title": "Textual description",
                    "type": "string",
                    "format": "textarea"
                }
            ]
        },
        "method_parameter": {
            "title": "Core Method Parameters",
            "description": "A list of the core or key equipment or software parameters used within this method. This does not need to be an exhaustive list and can be limited to the parameters which are used to control the activity, might influence subsequent interpretations or will be important for data comparison and discovery.",
            "type": "array",
            "items": {
                "title": "Parameter",
                "type": "object",
                "properties": {
                    "parameter_value": {
                        "title": "Value",
                        "type": ["number", "string", "boolean"],
                        "description": "The value of the core method value."
                    },
                    "parameter_unit": {
                        "title": "Unit",
                        "type": "string",
                        "description": "The unit it which the value is expressed.  This dropdown list gives a few examples, but if required, you can define your own component type here.",
                        "cordra": {
                            "type": {
                                "suggestedVocabulary": ["none", "cm", "nm", "counts", "Pa", "bar"]
                            }
                        }
                    },
                    "parameter_type": {
                        "description": "The type of parameter. This dropdown list gives a few examples, but if required, you can define your own parameeter type here.",
                        "$ref": "https://e-rihs.io/schema/example_lists.schema.json#/definitions/parameter_type"
                    },
                    "parameter_related_tool": {
                        "title": "Parameter Specific Related Tool",
                        "description": "When multiple Tools are used within a single method, defined parameters can be associated to the relevant tool. This can be left blank for single tool Methods and the assumption will be that the parameters are associated with single tool related to the Method in general.",
                        "type": "string",
                        "cordra": {
                            "type": {
                                "handleReference": {
                                    "types": ["Equipment", "Software"]
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}